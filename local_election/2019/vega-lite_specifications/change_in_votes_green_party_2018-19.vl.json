{
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": "Visualisation showing how the share of votes for the Green Party has changed between the Trafford local elections in 2018 and 2019.",
  "autosize": {"type": "fit"},
  "width": 600,
  "height": 500,
  "title": {"text": "Change in share of Green Party votes, 2018 - 2019", "offset": 20},
  "data": {
    "values": [
        {
          "area_name": "Altrincham",
          "year": 2018,
          "ballots_issued": 8266,
          "green_vote": 3565
        },
        {
          "area_name": "Ashton upon Mersey",
          "year": 2018,
          "ballots_issued": 3590,
          "green_vote": 148
        },
        {
          "area_name": "Bowdon",
          "year": 2018,
          "ballots_issued": 3121,
          "green_vote": 169
        },
        {
          "area_name": "Broadheath",
          "year": 2018,
          "ballots_issued": 4218,
          "green_vote": 160
        },
        {
          "area_name": "Brooklands",
          "year": 2018,
          "ballots_issued": 4080,
          "green_vote": 155
        },
        {
          "area_name": "Bucklow-St Martins",
          "year": 2018,
          "ballots_issued": 2027,
          "green_vote": 44
        },
        {
          "area_name": "Clifford",
          "year": 2018,
          "ballots_issued": 3212,
          "green_vote": 255
        },
        {
          "area_name": "Davyhulme East",
          "year": 2018,
          "ballots_issued": 3837,
          "green_vote": 100
        },
        {
          "area_name": "Davyhulme West",
          "year": 2018,
          "ballots_issued": 3884,
          "green_vote": 71
        },
        {
          "area_name": "Flixton",
          "year": 2018,
          "ballots_issued": 4562,
          "green_vote": 125
        },
        {
          "area_name": "Gorse Hill",
          "year": 2018,
          "ballots_issued": 2799,
          "green_vote": 115
        },
        {
          "area_name": "Hale Barns",
          "year": 2018,
          "ballots_issued": 2900,
          "green_vote": 95
        },
        {
          "area_name": "Hale Central",
          "year": 2018,
          "ballots_issued": 2999,
          "green_vote": 166
        },
        {
          "area_name": "Longford",
          "year": 2018,
          "ballots_issued": 3658,
          "green_vote": 238
        },
        {
          "area_name": "Priory",
          "year": 2018,
          "ballots_issued": 3352,
          "green_vote": 170
        },
        {
          "area_name": "St Mary's",
          "year": 2018,
          "ballots_issued": 3432,
          "green_vote": 149
        },
        {
          "area_name": "Sale Moor",
          "year": 2018,
          "ballots_issued": 2777,
          "green_vote": 161
        },
        {
          "area_name": "Stretford",
          "year": 2018,
          "ballots_issued": 3130,
          "green_vote": 211
        },
        {
          "area_name": "Timperley",
          "year": 2018,
          "ballots_issued": 4204,
          "green_vote": 113
        },
        {
          "area_name": "Urmston",
          "year": 2018,
          "ballots_issued": 3890,
          "green_vote": 155
        },
        {
          "area_name": "Village",
          "year": 2018,
          "ballots_issued": 3267,
          "green_vote": 73
        },
        {
          "area_name": "Altrincham",
          "year": 2019,
          "ballots_issued": 3898,
          "green_vote": 2377
        },
        {
          "area_name": "Ashton upon Mersey",
          "year": 2019,
          "ballots_issued": 3588,
          "green_vote": 273
        },
        {
          "area_name": "Bowdon",
          "year": 2019,
          "ballots_issued": 2929,
          "green_vote": 411
        },
        {
          "area_name": "Broadheath",
          "year": 2019,
          "ballots_issued": 4048,
          "green_vote": 346
        },
        {
          "area_name": "Brooklands",
          "year": 2019,
          "ballots_issued": 3682,
          "green_vote": 309
        },
        {
          "area_name": "Bucklow-St Martins",
          "year": 2019,
          "ballots_issued": 1824,
          "green_vote": 134
        },
        {
          "area_name": "Clifford",
          "year": 2019,
          "ballots_issued": 3012,
          "green_vote": 378
        },
        {
          "area_name": "Davyhulme East",
          "year": 2019,
          "ballots_issued": 3177,
          "green_vote": 184
        },
        {
          "area_name": "Davyhulme West",
          "year": 2019,
          "ballots_issued": 3197,
          "green_vote": 150
        },
        {
          "area_name": "Flixton",
          "year": 2019,
          "ballots_issued": 3787,
          "green_vote": 217
        },
        {
          "area_name": "Gorse Hill",
          "year": 2019,
          "ballots_issued": 2620,
          "green_vote": 252
        },
        {
          "area_name": "Hale Barns",
          "year": 2019,
          "ballots_issued": 2817,
          "green_vote": 196
        },
        {
          "area_name": "Hale Central",
          "year": 2019,
          "ballots_issued": 2973,
          "green_vote": 512
        },
        {
          "area_name": "Longford",
          "year": 2019,
          "ballots_issued": 3242,
          "green_vote": 406
        },
        {
          "area_name": "Priory",
          "year": 2019,
          "ballots_issued": 3109,
          "green_vote": 404
        },
        {
          "area_name": "St Mary's",
          "year": 2019,
          "ballots_issued": 3126,
          "green_vote": 294
        },
        {
          "area_name": "Sale Moor",
          "year": 2019,
          "ballots_issued": 2601,
          "green_vote": 355
        },
        {
          "area_name": "Stretford",
          "year": 2019,
          "ballots_issued": 2804,
          "green_vote": 304
        },
        {
          "area_name": "Timperley",
          "year": 2019,
          "ballots_issued": 3918,
          "green_vote": 423
        },
        {
          "area_name": "Urmston",
          "year": 2019,
          "ballots_issued": 3394,
          "green_vote": 290
        },
        {
          "area_name": "Village",
          "year": 2019,
          "ballots_issued": 3217,
          "green_vote": 196
        }
    ]
  },
  "transform": [
    {
      "calculate": "(datum.green_vote/datum.ballots_issued)", "as": "vote_percentage"
    }
  ],
  "encoding": {
    "x": {
      "field": "vote_percentage",
      "type": "quantitative",
      "scale": { "domain": [0, 1] },
      "axis": {
        "title": "Source: trafford.gov.uk",
        "titleX": 441,
        "titleY": 20,
        "format": "%"
      }
    },
    "y": {
      "field": "area_name",
      "type": "nominal",
      "axis": {
        "title": null,
        "offset": 5,
        "ticks": false,
        "minExtent": 70,
        "domain": false
      }
    }
  },
  "layer": [
    {
      "mark": "line",
      "encoding": {
        "detail": {"field": "area_name", "type": "nominal"},
        "color": {"value": "#212121"},
        "size": {"value": 1}
      }
    },
    {
      "mark": {"type": "point", "filled": true},
      "encoding": {
        "color": {
          "field": "year",
          "type": "ordinal",
          "scale": {"domain": [2018, 2019], "range": ["#ccc", "#6ab023"]},
          "legend": {
            "title": null,
            "orient": "bottom",
            "direction": "horizontal"
          }
        },
        "size": {"value": 100},
        "opacity": {"value": 1},
        "tooltip": [
          {"field": "vote_percentage", "type": "quantitative", "title": "Share of votes", "format": ".1%"}
        ]
      }
    }
  ],
  "config": {
    "style": {"cell": {"stroke": "transparent"}},
    "axis": {"ticks": false, "domainColor": ""}
  }
}
