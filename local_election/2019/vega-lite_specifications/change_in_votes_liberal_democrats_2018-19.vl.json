{
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": "Visualisation showing how the share of votes for the Liberal Democrats has changed between the Trafford local elections in 2018 and 2019.",
  "autosize": {"type": "fit"},
  "width": 600,
  "height": 500,
  "title": {"text": "Change in share of Liberal Democrats votes, 2018 - 2019", "offset": 20},
  "data": {
    "values": [
        {
          "area_name": "Altrincham",
          "year": 2018,
          "ballots_issued": 8266,
          "liberal_democrats_vote": 211
        },
        {
          "area_name": "Ashton upon Mersey",
          "year": 2018,
          "ballots_issued": 3590,
          "liberal_democrats_vote": 138
        },
        {
          "area_name": "Bowdon",
          "year": 2018,
          "ballots_issued": 3121,
          "liberal_democrats_vote": 356
        },
        {
          "area_name": "Broadheath",
          "year": 2018,
          "ballots_issued": 4218,
          "liberal_democrats_vote": 170
        },
        {
          "area_name": "Brooklands",
          "year": 2018,
          "ballots_issued": 4080,
          "liberal_democrats_vote": 170
        },
        {
          "area_name": "Bucklow-St Martins",
          "year": 2018,
          "ballots_issued": 2027,
          "liberal_democrats_vote": 38
        },
        {
          "area_name": "Clifford",
          "year": 2018,
          "ballots_issued": 3212,
          "liberal_democrats_vote": 82
        },
        {
          "area_name": "Davyhulme East",
          "year": 2018,
          "ballots_issued": 3837,
          "liberal_democrats_vote": 73
        },
        {
          "area_name": "Davyhulme West",
          "year": 2018,
          "ballots_issued": 3884,
          "liberal_democrats_vote": 81
        },
        {
          "area_name": "Flixton",
          "year": 2018,
          "ballots_issued": 4562,
          "liberal_democrats_vote": 84
        },
        {
          "area_name": "Gorse Hill",
          "year": 2018,
          "ballots_issued": 2799,
          "liberal_democrats_vote": 88
        },
        {
          "area_name": "Hale Barns",
          "year": 2018,
          "ballots_issued": 2900,
          "liberal_democrats_vote": 258
        },
        {
          "area_name": "Hale Central",
          "year": 2018,
          "ballots_issued": 2999,
          "liberal_democrats_vote": 364
        },
        {
          "area_name": "Longford",
          "year": 2018,
          "ballots_issued": 3658,
          "liberal_democrats_vote": 194
        },
        {
          "area_name": "Priory",
          "year": 2018,
          "ballots_issued": 3352,
          "liberal_democrats_vote": 170
        },
        {
          "area_name": "St Mary's",
          "year": 2018,
          "ballots_issued": 3432,
          "liberal_democrats_vote": 167
        },
        {
          "area_name": "Sale Moor",
          "year": 2018,
          "ballots_issued": 2777,
          "liberal_democrats_vote": 207
        },
        {
          "area_name": "Stretford",
          "year": 2018,
          "ballots_issued": 3130,
          "liberal_democrats_vote": 98
        },
        {
          "area_name": "Timperley",
          "year": 2018,
          "ballots_issued": 4204,
          "liberal_democrats_vote": 1329
        },
        {
          "area_name": "Urmston",
          "year": 2018,
          "ballots_issued": 3890,
          "liberal_democrats_vote": 130
        },
        {
          "area_name": "Village",
          "year": 2018,
          "ballots_issued": 3267,
          "liberal_democrats_vote": 1003
        },
        {
          "area_name": "Altrincham",
          "year": 2019,
          "ballots_issued": 3898,
          "liberal_democrats_vote": 128
        },
        {
          "area_name": "Ashton upon Mersey",
          "year": 2019,
          "ballots_issued": 3588,
          "liberal_democrats_vote": 247
        },
        {
          "area_name": "Bowdon",
          "year": 2019,
          "ballots_issued": 2929,
          "liberal_democrats_vote": 411
        },
        {
          "area_name": "Broadheath",
          "year": 2019,
          "ballots_issued": 4048,
          "liberal_democrats_vote": 219
        },
        {
          "area_name": "Brooklands",
          "year": 2019,
          "ballots_issued": 3682,
          "liberal_democrats_vote": 298
        },
        {
          "area_name": "Bucklow-St Martins",
          "year": 2019,
          "ballots_issued": 1824,
          "liberal_democrats_vote": 76
        },
        {
          "area_name": "Clifford",
          "year": 2019,
          "ballots_issued": 3012,
          "liberal_democrats_vote": 93
        },
        {
          "area_name": "Davyhulme East",
          "year": 2019,
          "ballots_issued": 3177,
          "liberal_democrats_vote": 102
        },
        {
          "area_name": "Davyhulme West",
          "year": 2019,
          "ballots_issued": 3197,
          "liberal_democrats_vote": 86
        },
        {
          "area_name": "Flixton",
          "year": 2019,
          "ballots_issued": 3787,
          "liberal_democrats_vote": 152
        },
        {
          "area_name": "Gorse Hill",
          "year": 2019,
          "ballots_issued": 2620,
          "liberal_democrats_vote": 129
        },
        {
          "area_name": "Hale Barns",
          "year": 2019,
          "ballots_issued": 2817,
          "liberal_democrats_vote": 313
        },
        {
          "area_name": "Hale Central",
          "year": 2019,
          "ballots_issued": 2973,
          "liberal_democrats_vote": 555
        },
        {
          "area_name": "Longford",
          "year": 2019,
          "ballots_issued": 3242,
          "liberal_democrats_vote": 318
        },
        {
          "area_name": "Priory",
          "year": 2019,
          "ballots_issued": 3109,
          "liberal_democrats_vote": 305
        },
        {
          "area_name": "St Mary's",
          "year": 2019,
          "ballots_issued": 3126,
          "liberal_democrats_vote": 188
        },
        {
          "area_name": "Sale Moor",
          "year": 2019,
          "ballots_issued": 2601,
          "liberal_democrats_vote": 203
        },
        {
          "area_name": "Stretford",
          "year": 2019,
          "ballots_issued": 2804,
          "liberal_democrats_vote": 107
        },
        {
          "area_name": "Timperley",
          "year": 2019,
          "ballots_issued": 3918,
          "liberal_democrats_vote": 1653
        },
        {
          "area_name": "Urmston",
          "year": 2019,
          "ballots_issued": 3394,
          "liberal_democrats_vote": 179
        },
        {
          "area_name": "Village",
          "year": 2019,
          "ballots_issued": 3217,
          "liberal_democrats_vote": 1310
        }
    ]
  },
  "transform": [
    {
      "calculate": "(datum.liberal_democrats_vote/datum.ballots_issued)", "as": "vote_percentage"
    }
  ],
  "encoding": {
    "x": {
      "field": "vote_percentage",
      "type": "quantitative",
      "scale": { "domain": [0, 1] },
      "axis": {
        "title": "Source: trafford.gov.uk",
        "titleX": 441,
        "titleY": 20,
        "format": "%"
      }
    },
    "y": {
      "field": "area_name",
      "type": "nominal",
      "axis": {
        "title": null,
        "offset": 5,
        "ticks": false,
        "minExtent": 70,
        "domain": false
      }
    }
  },
  "layer": [
    {
      "mark": "line",
      "encoding": {
        "detail": {"field": "area_name", "type": "nominal"},
        "color": {"value": "#212121"},
        "size": {"value": 1}
      }
    },
    {
      "mark": {"type": "point", "filled": true},
      "encoding": {
        "color": {
          "field": "year",
          "type": "ordinal",
          "scale": {"domain": [2018, 2019], "range": ["#ccc", "#fdbb30"]},
          "legend": {
            "title": null,
            "orient": "bottom",
            "direction": "horizontal"
          }
        },
        "size": {"value": 100},
        "opacity": {"value": 1},
        "tooltip": [
          {"field": "vote_percentage", "type": "quantitative", "title": "Share of votes", "format": ".1%"}
        ]
      }
    }
  ],
  "config": {
    "style": {"cell": {"stroke": "transparent"}},
    "axis": {"ticks": false, "domainColor": ""}
  }
}
