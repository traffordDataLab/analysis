{
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": "Visualisation showing how the share of votes for the Conservative Party has changed between the Trafford local elections in 2018 and 2019.",
  "autosize": {"type": "fit"},
  "width": 600,
  "height": 500,
  "title": {"text": "Change in share of Conservative votes, 2018 - 2019", "offset": 20},
  "data": {
    "values": [
        {
          "area_name": "Altrincham",
          "year": 2018,
          "ballots_issued": 8266,
          "conservative_vote": 2728
        },
        {
          "area_name": "Ashton upon Mersey",
          "year": 2018,
          "ballots_issued": 3590,
          "conservative_vote": 1677
        },
        {
          "area_name": "Bowdon",
          "year": 2018,
          "ballots_issued": 3121,
          "conservative_vote": 2130
        },
        {
          "area_name": "Broadheath",
          "year": 2018,
          "ballots_issued": 4218,
          "conservative_vote": 1716
        },
        {
          "area_name": "Brooklands",
          "year": 2018,
          "ballots_issued": 4080,
          "conservative_vote": 1755
        },
        {
          "area_name": "Bucklow-St Martins",
          "year": 2018,
          "ballots_issued": 2027,
          "conservative_vote": 424
        },
        {
          "area_name": "Clifford",
          "year": 2018,
          "ballots_issued": 3212,
          "conservative_vote": 165
        },
        {
          "area_name": "Davyhulme East",
          "year": 2018,
          "ballots_issued": 3837,
          "conservative_vote": 1388
        },
        {
          "area_name": "Davyhulme West",
          "year": 2018,
          "ballots_issued": 3884,
          "conservative_vote": 1403
        },
        {
          "area_name": "Flixton",
          "year": 2018,
          "ballots_issued": 4562,
          "conservative_vote": 1528
        },
        {
          "area_name": "Gorse Hill",
          "year": 2018,
          "ballots_issued": 2799,
          "conservative_vote": 485
        },
        {
          "area_name": "Hale Barns",
          "year": 2018,
          "ballots_issued": 2900,
          "conservative_vote": 1932
        },
        {
          "area_name": "Hale Central",
          "year": 2018,
          "ballots_issued": 2999,
          "conservative_vote": 1604
        },
        {
          "area_name": "Longford",
          "year": 2018,
          "ballots_issued": 3658,
          "conservative_vote": 547
        },
        {
          "area_name": "Priory",
          "year": 2018,
          "ballots_issued": 3352,
          "conservative_vote": 988
        },
        {
          "area_name": "St Mary's",
          "year": 2018,
          "ballots_issued": 3432,
          "conservative_vote": 2053
        },
        {
          "area_name": "Sale Moor",
          "year": 2018,
          "ballots_issued": 2777,
          "conservative_vote": 971
        },
        {
          "area_name": "Stretford",
          "year": 2018,
          "ballots_issued": 3130,
          "conservative_vote": 490
        },
        {
          "area_name": "Timperley",
          "year": 2018,
          "ballots_issued": 4204,
          "conservative_vote": 1694
        },
        {
          "area_name": "Urmston",
          "year": 2018,
          "ballots_issued": 3890,
          "conservative_vote": 1217
        },
        {
          "area_name": "Village",
          "year": 2018,
          "ballots_issued": 3267,
          "conservative_vote": 1331
        },
        {
          "area_name": "Altrincham",
          "year": 2019,
          "ballots_issued": 3898,
          "conservative_vote": 1057
        },
        {
          "area_name": "Ashton upon Mersey",
          "year": 2019,
          "ballots_issued": 3588,
          "conservative_vote": 1398
        },
        {
          "area_name": "Bowdon",
          "year": 2019,
          "ballots_issued": 2929,
          "conservative_vote": 1727
        },
        {
          "area_name": "Broadheath",
          "year": 2019,
          "ballots_issued": 4048,
          "conservative_vote": 1219
        },
        {
          "area_name": "Brooklands",
          "year": 2019,
          "ballots_issued": 3682,
          "conservative_vote": 1295
        },
        {
          "area_name": "Bucklow-St Martins",
          "year": 2019,
          "ballots_issued": 1824,
          "conservative_vote": 327
        },
        {
          "area_name": "Clifford",
          "year": 2019,
          "ballots_issued": 3012,
          "conservative_vote": 155
        },
        {
          "area_name": "Davyhulme East",
          "year": 2019,
          "ballots_issued": 3177,
          "conservative_vote": 695
        },
        {
          "area_name": "Davyhulme West",
          "year": 2019,
          "ballots_issued": 3197,
          "conservative_vote": 965
        },
        {
          "area_name": "Flixton",
          "year": 2019,
          "ballots_issued": 3787,
          "conservative_vote": 915
        },
        {
          "area_name": "Gorse Hill",
          "year": 2019,
          "ballots_issued": 2620,
          "conservative_vote": 310
        },
        {
          "area_name": "Hale Barns",
          "year": 2019,
          "ballots_issued": 2817,
          "conservative_vote": 1613
        },
        {
          "area_name": "Hale Central",
          "year": 2019,
          "ballots_issued": 2973,
          "conservative_vote": 1430
        },
        {
          "area_name": "Longford",
          "year": 2019,
          "ballots_issued": 3242,
          "conservative_vote": 336
        },
        {
          "area_name": "Priory",
          "year": 2019,
          "ballots_issued": 3109,
          "conservative_vote": 679
        },
        {
          "area_name": "St Mary's",
          "year": 2019,
          "ballots_issued": 3126,
          "conservative_vote": 1527
        },
        {
          "area_name": "Sale Moor",
          "year": 2019,
          "ballots_issued": 2601,
          "conservative_vote": 664
        },
        {
          "area_name": "Stretford",
          "year": 2019,
          "ballots_issued": 2804,
          "conservative_vote": 329
        },
        {
          "area_name": "Timperley",
          "year": 2019,
          "ballots_issued": 3918,
          "conservative_vote": 1266
        },
        {
          "area_name": "Urmston",
          "year": 2019,
          "ballots_issued": 3394,
          "conservative_vote": 724
        },
        {
          "area_name": "Village",
          "year": 2019,
          "ballots_issued": 3217,
          "conservative_vote": 942
        }
    ]
  },
  "transform": [
    {
      "calculate": "(datum.conservative_vote/datum.ballots_issued)", "as": "vote_percentage"
    }
  ],
  "encoding": {
    "x": {
      "field": "vote_percentage",
      "type": "quantitative",
      "scale": { "domain": [0, 1] },
      "axis": {
        "title": "Source: trafford.gov.uk",
        "titleX": 441,
        "titleY": 20,
        "format": "%"
      }
    },
    "y": {
      "field": "area_name",
      "type": "nominal",
      "axis": {
        "title": null,
        "offset": 5,
        "ticks": false,
        "minExtent": 70,
        "domain": false
      }
    }
  },
  "layer": [
    {
      "mark": "line",
      "encoding": {
        "detail": {"field": "area_name", "type": "nominal"},
        "color": {"value": "#212121"},
        "size": {"value": 1}
      }
    },
    {
      "mark": {"type": "point", "filled": true},
      "encoding": {
        "color": {
          "field": "year",
          "type": "ordinal",
          "scale": {"domain": [2018, 2019], "range": ["#ccc", "#0087dc"]},
          "legend": {
            "title": null,
            "orient": "bottom",
            "direction": "horizontal"
          }
        },
        "size": {"value": 100},
        "opacity": {"value": 1},
        "tooltip": [
          {"field": "vote_percentage", "type": "quantitative", "title": "Share of votes", "format": ".1%"}
        ]
      }
    }
  ],
  "config": {
    "style": {"cell": {"stroke": "transparent"}},
    "axis": {"ticks": false, "domainColor": ""}
  }
}
