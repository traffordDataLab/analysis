{
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "description": "Visualisation showing how the share of votes for the Labour Party has changed between the Trafford local elections in 2018 and 2019.",
  "autosize": {"type": "fit"},
  "width": 600,
  "height": 500,
  "title": {"text": "Change in share of Labour votes, 2018 - 2019", "offset": 20},
  "data": {
    "values": [
        {
          "area_name": "Altrincham",
          "year": 2018,
          "ballots_issued": 8266,
          "labour_vote": 1501
        },
        {
          "area_name": "Ashton upon Mersey",
          "year": 2018,
          "ballots_issued": 3590,
          "labour_vote": 1568
        },
        {
          "area_name": "Bowdon",
          "year": 2018,
          "ballots_issued": 3121,
          "labour_vote": 422
        },
        {
          "area_name": "Broadheath",
          "year": 2018,
          "ballots_issued": 4218,
          "labour_vote": 2077
        },
        {
          "area_name": "Brooklands",
          "year": 2018,
          "ballots_issued": 4080,
          "labour_vote": 1939
        },
        {
          "area_name": "Bucklow-St Martins",
          "year": 2018,
          "ballots_issued": 2027,
          "labour_vote": 1427
        },
        {
          "area_name": "Clifford",
          "year": 2018,
          "ballots_issued": 3212,
          "labour_vote": 2702
        },
        {
          "area_name": "Davyhulme East",
          "year": 2018,
          "ballots_issued": 3837,
          "labour_vote": 2205
        },
        {
          "area_name": "Davyhulme West",
          "year": 2018,
          "ballots_issued": 3884,
          "labour_vote": 2230
        },
        {
          "area_name": "Flixton",
          "year": 2018,
          "ballots_issued": 4562,
          "labour_vote": 2732
        },
        {
          "area_name": "Gorse Hill",
          "year": 2018,
          "ballots_issued": 2799,
          "labour_vote": 2039
        },
        {
          "area_name": "Hale Barns",
          "year": 2018,
          "ballots_issued": 2900,
          "labour_vote": 477
        },
        {
          "area_name": "Hale Central",
          "year": 2018,
          "ballots_issued": 2999,
          "labour_vote": 809
        },
        {
          "area_name": "Longford",
          "year": 2018,
          "ballots_issued": 3658,
          "labour_vote": 2611
        },
        {
          "area_name": "Priory",
          "year": 2018,
          "ballots_issued": 3352,
          "labour_vote": 2018
        },
        {
          "area_name": "St Mary's",
          "year": 2018,
          "ballots_issued": 3432,
          "labour_vote": 1054
        },
        {
          "area_name": "Sale Moor",
          "year": 2018,
          "ballots_issued": 2777,
          "labour_vote": 1433
        },
        {
          "area_name": "Stretford",
          "year": 2018,
          "ballots_issued": 3130,
          "labour_vote": 2231
        },
        {
          "area_name": "Timperley",
          "year": 2018,
          "ballots_issued": 4204,
          "labour_vote": "NA"
        },
        {
          "area_name": "Urmston",
          "year": 2018,
          "ballots_issued": 3890,
          "labour_vote": 2243
        },
        {
          "area_name": "Village",
          "year": 2018,
          "ballots_issued": 3267,
          "labour_vote": 742
        },
        {
          "area_name": "Altrincham",
          "year": 2019,
          "ballots_issued": 3898,
          "labour_vote": 313
        },
        {
          "area_name": "Ashton upon Mersey",
          "year": 2019,
          "ballots_issued": 3588,
          "labour_vote": 1535
        },
        {
          "area_name": "Bowdon",
          "year": 2019,
          "ballots_issued": 2929,
          "labour_vote": 351
        },
        {
          "area_name": "Broadheath",
          "year": 2019,
          "ballots_issued": 4048,
          "labour_vote": 1904
        },
        {
          "area_name": "Brooklands",
          "year": 2019,
          "ballots_issued": 3682,
          "labour_vote": 1587
        },
        {
          "area_name": "Bucklow-St Martins",
          "year": 2019,
          "ballots_issued": 1824,
          "labour_vote": 988
        },
        {
          "area_name": "Clifford",
          "year": 2019,
          "ballots_issued": 3012,
          "labour_vote": 2375
        },
        {
          "area_name": "Davyhulme East",
          "year": 2019,
          "ballots_issued": 3177,
          "labour_vote": 1929
        },
        {
          "area_name": "Davyhulme West",
          "year": 2019,
          "ballots_issued": 3197,
          "labour_vote": 1704
        },
        {
          "area_name": "Flixton",
          "year": 2019,
          "ballots_issued": 3787,
          "labour_vote": 2203
        },
        {
          "area_name": "Gorse Hill",
          "year": 2019,
          "ballots_issued": 2620,
          "labour_vote": 1703
        },
        {
          "area_name": "Hale Barns",
          "year": 2019,
          "ballots_issued": 2817,
          "labour_vote": 378
        },
        {
          "area_name": "Hale Central",
          "year": 2019,
          "ballots_issued": 2973,
          "labour_vote": 447
        },
        {
          "area_name": "Longford",
          "year": 2019,
          "ballots_issued": 3242,
          "labour_vote": 2150
        },
        {
          "area_name": "Priory",
          "year": 2019,
          "ballots_issued": 3109,
          "labour_vote": 1511
        },
        {
          "area_name": "St Mary's",
          "year": 2019,
          "ballots_issued": 3126,
          "labour_vote": 920
        },
        {
          "area_name": "Sale Moor",
          "year": 2019,
          "ballots_issued": 2601,
          "labour_vote": 1347
        },
        {
          "area_name": "Stretford",
          "year": 2019,
          "ballots_issued": 2804,
          "labour_vote": 1843
        },
        {
          "area_name": "Timperley",
          "year": 2019,
          "ballots_issued": 3918,
          "labour_vote": "NA"
        },
        {
          "area_name": "Urmston",
          "year": 2019,
          "ballots_issued": 3394,
          "labour_vote": 1844
        },
        {
          "area_name": "Village",
          "year": 2019,
          "ballots_issued": 3217,
          "labour_vote": 456
        }
    ]
  },
  "transform": [
    {
      "calculate": "(datum.labour_vote/datum.ballots_issued)", "as": "vote_percentage"
    }
  ],
  "encoding": {
    "x": {
      "field": "vote_percentage",
      "type": "quantitative",
      "scale": { "domain": [0, 1] },
      "axis": {
        "title": "* Labour did not field a candidate in Timperley in 2019. Source: trafford.gov.uk",
        "titleX": 300,
        "titleY": 20,
        "format": "%"
      }
    },
    "y": {
      "field": "area_name",
      "type": "nominal",
      "axis": {
        "title": null,
        "offset": 5,
        "ticks": false,
        "minExtent": 70,
        "domain": false
      }
    }
  },
  "layer": [
    {
      "mark": "line",
      "encoding": {
        "detail": {"field": "area_name", "type": "nominal"},
        "color": {"value": "#212121"},
        "size": {"value": 1}
      }
    },
    {
      "mark": {"type": "point", "filled": true},
      "encoding": {
        "color": {
          "field": "year",
          "type": "ordinal",
          "scale": {"domain": [2018, 2019], "range": ["#ccc", "#dc241f"]},
          "legend": {
            "title": null,
            "orient": "bottom",
            "direction": "horizontal"
          }
        },
        "size": {"value": 100},
        "opacity": {"value": 1},
        "tooltip": [
          {"field": "vote_percentage", "type": "quantitative", "title": "Share of votes", "format": ".1%"}
        ]
      }
    }
  ],
  "config": {
    "style": {"cell": {"stroke": "transparent"}},
    "axis": {"ticks": false, "domainColor": ""}
  }
}
